# crash-repro

Reproduce crash in code generated by rustc for nintendo 3ds.

## Problem 1

## Notes

* Must use 3dsxtool, it crashes on the .elf somewhere in apt code...
* Needs clean build?
  * Since crash is in regex code, probably

* Ugh! fails even when no args used with `cargo rustc`...

Trying with `RUSTFLAGS` instead of `cargo rustc --` to impact other crates

* Damn: -1 does not crash, but using the highest number (x2 even) does:

```console
$ ./bisect-repro.sh
Finding max number of LLVM passes...
++ RUSTFLAGS='-C opt-level=1 -C debuginfo=0 -C codegen-units=1 -C llvm-args=-opt-bisect-limit=-1'
++ cargo -v rustc --target armv6k-nintendo-3ds
Sending crash-repro.3dsx, 999892 bytes
400775 sent (40.08%), 36 blocks
Did it crash? [y/n] n
+ RUSTFLAGS='-C opt-level=1 -C debuginfo=0 -C codegen-units=1 -C llvm-args=-opt-bisect-limit=199998'
+ cargo -v rustc --target armv6k-nintendo-3ds
Sending crash-repro.3dsx, 1083016 bytes
423976 sent (39.15%), 38 blocks
Did it crash? [y/n] y
Max passes (199998) crash, bisecting is impossible. Exiting
```
